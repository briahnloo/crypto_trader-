# Crypto MVP - AGGRESSIVE Profit Optimized Configuration
# ⚡ OPTIMIZED FOR MAXIMUM PROFIT WITH CONTROLLED RISK ⚡

# Trading Configuration
trading:
  timeframe: "1h"
  symbols:
    # Binance-compatible symbols (USDT quotes)
    # ADA/USDT and BNB/USDT removed for Coinbase compatibility
    - "BTC/USDT"
    - "ETH/USDT"
    - "SOL/USDT"
    - "XRP/USDT"
    - "DOGE/USDT"
  symbol_whitelist:
    # Binance-compatible symbols (USDT quotes)
    # ADA/USDT and BNB/USDT removed for Coinbase compatibility
    - "BTC/USDT"
    - "ETH/USDT"
    - "SOL/USDT"
    - "XRP/USDT"
    - "DOGE/USDT"
  strategies:
    - "momentum"
    - "breakout"
    - "arbitrage"
    - "sentiment"
    - "whale_tracking"
  max_open_trades: 10  # AGGRESSIVE: Increased from 5 to 10 for more concurrent positions
  min_trade_interval: 180  # AGGRESSIVE: 3 minutes (was 5) for faster trading
  trade_timeout: 3600  # 1 hour in seconds
  min_confidence: 0.15  # PRODUCTION-AGGRESSIVE: 0.15 for maximum opportunities
  min_signal_score: 0.05  # AGGRESSIVE: 0.05 for more trades
  cycle_interval: 60  # Time between trading cycles in seconds (60 seconds)
  initial_capital: 10000  # Starting capital for trading
  live_mode: false  # Live trading mode (false for paper trading)
  dry_run: false  # Dry run mode (false to allow simulated trades)
  ohlcv_limit: 100  # Number of OHLCV candles to fetch

# Risk Management Configuration
risk:
  max_drawdown: 0.20  # AGGRESSIVE: 20% maximum drawdown (was 10%)
  stop_loss: 0.02  # 2% stop loss
  take_profit: 0.04  # 4% take profit
  position_sizing:
    method: "risk_based"  # risk_based, fixed_risk, fixed_size, kelly_criterion
    risk_per_trade_pct: 3.0  # AGGRESSIVE: 3% of equity per trade (was 0.25%)
    max_notional_pct: 15.0  # AGGRESSIVE: 15% max notional of equity (was 1.0%)
    risk_per_trade: 0.03  # AGGRESSIVE: 3% risk per trade (was 0.01%)
    max_position_size: 0.20  # AGGRESSIVE: 20% max position size (was 0.1%)
  daily_loss_limit: 0.10  # AGGRESSIVE: 10% daily loss limit (was 0.05%)
  max_drawdown_limit: 0.20  # AGGRESSIVE: 20% maximum drawdown limit (was 0.10%)
  position_size_limit: 0.20  # AGGRESSIVE: 20% maximum position size limit (was 0.02%)
  stop_loss_percentage: 0.03  # 3% automatic stop loss percentage
  max_risk_per_trade: 0.05  # AGGRESSIVE: 5% maximum risk per trade (was 0.02%)
  max_correlation: 0.7  # Maximum correlation between positions
  volatility_adjustment: true
  dynamic_sizing: true
  
  # SL/TP derivation configuration
  sl_tp:
    atr_mult_sl: 1.0          # AGGRESSIVE: Tighter stop (was 1.2) for more trades
    atr_mult_tp: 2.5          # AGGRESSIVE: Wider target (was 2.0) for bigger wins
    fallback_pct_sl: 0.015    # AGGRESSIVE: 1.5% fallback stop loss (was 2%)
    fallback_pct_tp: 0.05     # AGGRESSIVE: 5% fallback take profit (was 4%)
    min_sl_abs: 0.001         # absolute guardrail for small-price assets
    min_tp_abs: 0.002         # absolute guardrail for small-price assets
  
  # Risk-Reward and fallback configuration
  enable_percent_fallback: true  # Enable percent-based SL/TP when ATR fails
  rr_min: 1.05                   # PRODUCTION-AGGRESSIVE: 1.05 RR minimum for maximum trades
  rr_relax_for_pilot: 1.00       # PRODUCTION-AGGRESSIVE: 1.00 RR for pilots (breakeven+ acceptable)
  
  # OCO (One-Cancels-Other) order management
  oco_enabled: true              # Enable OCO orders after fills
  tp_atr: 0.7                    # Take profit at 0.7 * ATR
  sl_atr: 0.5                    # Stop loss at 0.5 * ATR
  time_stop_minutes: 30          # Time stop: exit after 30 minutes if no TP/SL hit
  trail_after_atr: 1.0           # Start trailing TP after +1 ATR in favor
  trail_step_atr: 0.3            # Trail TP by 0.3 * ATR steps
  
  # Stop-loss cooldown
  cooldown_after_sl_seconds: 180  # 5 minutes cooldown after stop-loss hit
  
  # Risk-per-trade sizing
  risk_per_trade_pct: 2.0        # AGGRESSIVE: Risk 2.0% of equity per trade (was 0.10%)
  allow_upsize: true             # AGGRESSIVE: Allow position sizing up (was false)
  
  # Exit logic configuration - CRITICAL FOR PROFITABILITY
  exits:
    enable_chandelier: true
    chandelier_n_atr: 2.5  # Trailing stop: 2.5x ATR
    time_stop_hours: 24  # Exit positions after 24 hours
    tp_ladders:
      - { profit_pct: 1.0, pct: 0.33 }  # +1.0% profit, sell 33% of position
      - { profit_pct: 2.0, pct: 0.50 }  # +2.0% profit, sell 50% of remaining
      - { profit_pct: 4.0, pct: 1.00 }  # +4.0% profit, sell 100% of remaining
    time_stop_bars: 60
    min_qty: 1e-9
  
  # Entry gate configuration
  entry_gate:
    enable_top_k: true          # Enable top-k selection for best opportunities
    top_k_entries: 4            # PRODUCTION-AGGRESSIVE: Top 4 candidates per cycle
    hard_floor_min: 0.20        # PRODUCTION-AGGRESSIVE: 0.20 floor for MAXIMUM trades
    gate_margin: 0.10           # 0.10 margin for flexibility
    effective_threshold: 0.45   # PRODUCTION-AGGRESSIVE: 0.45 threshold for high trade frequency
    enable_vol_gate_easing: true  # Enable volatility-aware easing
    vol_ease_k: 0.05           # More easing in volatile markets
    vol_ease_max: 0.8          # Max easing allowed
  
  # Exploration budget for forced pilots in quiet markets
  exploration:
    enabled: true
    budget_pct_per_day: 0.20     # AGGRESSIVE: 20% of equity/day (was 0.10%)
    min_score: 0.01              # Very low for maximum discovery
    max_forced_per_day: 5        # AGGRESSIVE: 5 trades per day (was 3)
    size_mult_vs_normal: 0.7     # AGGRESSIVE: 70% of normal (was 0.5)
    tighter_stop_mult: 0.8       # AGGRESSIVE: Less tight stops (was 0.7)
  
  # Risk-on override for volatile market conditions
  risk_on:
    enabled: true
    trigger:
      atr_over_sma: 0.90         # AGGRESSIVE: Lower trigger - activate MORE often
      atr_period: 14             # ATR period
      atr_sma_period: 100        # ATR_SMA period
    window_cycles: 5             # Longer window for risk-on
    min_gate_floor: 0.15         # PRODUCTION-AGGRESSIVE: 0.15 floor for risk-on mode
    risk_per_trade_pct: 0.05     # 5% in risk-on mode
    allow_pyramids: true
    max_adds: 2                  # PRODUCTION: 2 adds per position
    add_triggers_r: [0.7, 1.4]   # PRODUCTION: Add at +0.7R and +1.4R
  
  # Risk-based sizing configuration
  sizing:
    risk_per_trade_pct: 2.5    # PRODUCTION-AGGRESSIVE: 2.5% risk per trade ⚡
    max_position_value_pct: 0.25  # PRODUCTION-AGGRESSIVE: 25% max position
    pilot_multiplier: 0.6      # 60% of normal for pilots
    min_clip_$: 50.0           # $50 minimum slice
    per_symbol_cap_$: 3000.0   # PRODUCTION-AGGRESSIVE: $3,000 per symbol ⚡
    session_cap_$: 0.75        # PRODUCTION-AGGRESSIVE: 75% of equity
  
  # Daily loss limit guardrail
  daily_max_loss_pct: 0.10       # AGGRESSIVE: 10% halt (was 0.02%)
  
  # Preflight validation configuration
  min_stop_frac: 0.001           # Minimum stop distance as fraction of entry price (0.1%)
  fallback_stop_frac: 0.005      # Fallback stop distance as fraction of entry price (0.5%)
  short_enabled: false           # Global default - disable shorts on spot by default

# Live Trading Safeguards Configuration
live_trading_safeguards:
  # Paper trading mode - CRITICAL for testing
  paper_trading_mode: true  # Set to false only for live trading with real money
  paper_trading_balance: 10000  # Starting balance for paper trading
  
  # Emergency stop functionality
  emergency_stop:
    enabled: true
    manual_override: true  # Allow manual emergency stop
    auto_stop_triggers:
      - "max_drawdown_exceeded"
      - "daily_loss_limit_exceeded"
      - "position_size_limit_exceeded"
      - "api_connection_lost"
      - "unusual_activity_detected"
  
  # Position size limits for live trading
  position_limits:
    max_position_size_pct: 0.01  # 1% maximum position size for live trading
    max_total_exposure_pct: 0.05  # 5% maximum total exposure
    max_positions_count: 3  # Maximum number of open positions
    min_position_size_usd: 10  # Minimum position size in USD
    max_position_size_usd: 500  # Maximum position size in USD
  
  # Trading session limits
  session_limits:
    max_trading_hours: 8  # Maximum trading hours per day
    max_trades_per_day: 10  # Maximum trades per day
    max_trades_per_hour: 3  # Maximum trades per hour
    trading_start_time: "09:00"  # Trading start time (24h format)
    trading_end_time: "17:00"  # Trading end time (24h format)
    weekend_trading: false  # Allow trading on weekends
  
  # Real-time monitoring and alerts
  monitoring:
    enabled: true
    alert_thresholds:
      equity_change_pct: 2.0  # Alert if equity changes by more than 2% in one cycle
      position_pnl_pct: 5.0  # Alert if any position P&L exceeds 5%
      unusual_volume_multiplier: 3.0  # Alert if volume is 3x normal
      api_error_count: 5  # Alert if more than 5 API errors in 10 minutes
    
    # Alert destinations
    alerts:
      console: true  # Console alerts
      log_file: true  # Log file alerts
      email: false  # Email alerts (requires SMTP config)
      telegram: false  # Telegram alerts (requires bot token)
      discord: false  # Discord alerts (requires webhook)
  
  # Safety checks before live trading
  pre_live_checks:
    min_paper_trading_days: 7  # Minimum days of paper trading before live
    min_paper_trading_trades: 50  # Minimum paper trades before live
    max_paper_trading_loss_pct: 5.0  # Maximum paper trading loss allowed
    required_win_rate: 0.4  # Minimum win rate required (40%)
    required_profit_factor: 1.2  # Minimum profit factor required
  
  # Live trading confirmation
  live_trading_confirmation:
    require_confirmation: true  # Require explicit confirmation for live trading
    confirmation_timeout: 30  # Timeout in seconds for confirmation
    double_confirmation: true  # Require double confirmation for live trading
    confirmation_phrase: "I_UNDERSTAND_THE_RISKS"  # Phrase required for confirmation

# Universe Configuration
universe:
  # Binance-compatible whitelist (USDT quotes) - ADA and BNB removed for Coinbase compatibility
  whitelist: [BTC/USDT, ETH/USDT, SOL/USDT, XRP/USDT, DOGE/USDT]

# Symbol-specific Configuration
symbols:
  BTC/USDT:
    allow_short: false
  ETH/USDT:
    allow_short: false
  SOL/USDT:
    allow_short: false
  ADA/USDT:
    allow_short: false
  BNB/USDT:
    allow_short: false
  XRP/USDT:
    allow_short: false
  DOGE/USDT:
    allow_short: false

# Market Data Configuration
market_data:
  max_spread_bps: 3              # Maximum spread in basis points (0.03%)
  max_quote_age_ms: 200          # Maximum quote age in milliseconds
  require_l2_mid: true           # Require top-of-book mid from same venue as execution

# Enhanced Logging Configuration
logging:
  enhanced_execution_logs: true   # Enable detailed trade metrics logging
  aggregation_interval: 50        # Print aggregated table every N trades
  include_regime_analysis: true   # Include regime analysis in logs

# Exchange Configuration
exchanges:
  binance:
    enabled: true
    api_key: "${BINANCE_API_KEY:-your_binance_api_key_here}"
    secret: "${BINANCE_SECRET:-your_binance_secret_here}"
    sandbox: true
    rate_limit: 10
    timeout: 30
    symbols:
      - "BTC/USDT"
      - "ETH/USDT"
      - "ADA/USDT"
      - "SOL/USDT"
      - "BNB/USDT"
      - "XRP/USDT"
      - "DOGE/USDT"

  coinbase:
    enabled: true
    api_key: "${COINBASE_API_KEY:-your_coinbase_api_key_here}"
    secret: "${COINBASE_SECRET:-your_coinbase_secret_here}"
    sandbox: true
    rate_limit: 5
    timeout: 30
    symbols:
      - "BTC-USD"
      - "ETH-USD"

  ccxt:
    enabled: true
    exchanges:
      - "binance"
      - "coinbase"
    rate_limit: 5
    timeout: 30

# Data Sources Configuration
data_sources:
  # Market Data
  market_data:
    enabled: true
    sources:
      - "binance"
      - "coinbase"
    update_interval: 60  # seconds
    historical_days: 30

  # Technical Indicators
  technical_indicators:
    enabled: true
    indicators:
      - "rsi"
      - "macd"
      - "bollinger_bands"
      - "atr"
      - "stochastic"
      - "williams_r"
      - "cci"
      - "obv"
      - "ichimoku"
    lookback_periods: 100

  # Sentiment Analysis
  sentiment:
    enabled: true
    sources:
      social_media:
        enabled: true
        platforms:
          - "twitter"
          - "reddit"
        api_keys:
          twitter: "your_twitter_api_key_here"
          reddit: "your_reddit_api_key_here"
        update_interval: 300  # 5 minutes

      news:
        enabled: true
        sources:
          - "coindesk"
          - "decrypt"
          - "cointelegraph"
        api_keys:
          news_api: "your_news_api_key_here"
        update_interval: 600  # 10 minutes

      fear_greed:
        enabled: true
        api_key: "your_fear_greed_api_key_here"
        update_interval: 3600  # 1 hour

  # On-Chain Data
  on_chain:
    enabled: true
    sources:
      - "whale_alert"
      - "glassnode"
      - "blockchain_info"
    api_keys:
      whale_alert: "your_whale_alert_api_key_here"
      glassnode: "your_glassnode_api_key_here"
    update_interval: 1800  # 30 minutes
    min_whale_value: 1000000  # $1M minimum whale transaction

# Strategy Configuration
strategies:
  momentum:
    enabled: true
    weight: 0.35  # REAL INDICATORS: Primary strategy with RSI, MACD, Williams %R
    parameters:
      rsi_period: 14
      rsi_oversold: 30  # Standard oversold threshold
      rsi_overbought: 70  # Standard overbought threshold
      macd_fast: 12
      macd_slow: 26
      macd_signal: 9
      min_volume_ratio: 1.2
      williams_period: 14

  breakout:
    enabled: true
    weight: 0.30  # REAL INDICATORS: Secondary strategy with price action analysis
    parameters:
      lookback_period: 20
      breakout_threshold: 0.015
      volume_confirmation: true
      min_volume_multiplier: 1.5
      atr_period: 14
      atr_multiplier: 2.0

  mean_reversion:
    enabled: true
    weight: 0.20  # REAL INDICATORS: Bollinger Bands mean reversion
    parameters:
      bollinger_period: 20
      bollinger_std_dev: 2.0
      oversold_threshold: 0.2
      overbought_threshold: 0.8

  sentiment:
    enabled: true
    weight: 0.15  # FREE DATA: Fear & Greed Index + CoinGecko
    parameters:
      fear_greed_weight: 0.5  # Crypto Fear & Greed Index
      market_sentiment_weight: 0.5  # CoinGecko sentiment
      min_confidence: 0.5

  # DISABLED: Strategies requiring paid APIs or not applicable
  arbitrage:
    enabled: false  # Not applicable for single exchange paper trading
    weight: 0.0

  whale_tracking:
    enabled: false  # Requires paid on-chain data APIs
    weight: 0.0

  news_driven:
    enabled: false  # Requires Twitter/Reddit API access
    weight: 0.0

  on_chain:
    enabled: false  # Requires Glassnode or similar paid APIs
    weight: 0.0
  
  volatility:
    enabled: false  # Covered by momentum/breakout ATR analysis
    weight: 0.0
  
  correlation:
    enabled: false  # Not critical for initial profitability
    weight: 0.0

# Signal Configuration
signals:
  generation:
    enabled: true
    update_interval: 60  # seconds
    min_confidence: 0.5  # QUALITY OVER QUANTITY: Only trade high-confidence setups
    max_signals_per_symbol: 3

  filtering:
    enabled: true
    correlation_threshold: 0.7
    volatility_filter: true
    volume_filter: true
    time_filter: true

  execution:
    enabled: true
    delay: 5  # seconds delay before execution
    retry_attempts: 3
    retry_delay: 10  # seconds
  
  # Regime-specific thresholds
  regime:
    trend: 
      min_score: 0.50  # QUALITY SIGNALS: Higher threshold for better entries
      min_rr: 1.5      # BETTER R:R: 1.5:1 minimum risk/reward
    range:
      min_score: 0.45  # QUALITY SIGNALS: Higher threshold in ranging markets
      min_rr: 1.3      # BETTER R:R: 1.3:1 minimum in ranging markets

# Portfolio Management
portfolio:
  # Portfolio constraints
  max_positions: 5
  min_position_weight: 0.02  # 2% minimum
  max_position_weight: 0.30  # AGGRESSIVE: 30% maximum (was 0.25)
  target_volatility: 0.15  # AGGRESSIVE: 15% target volatility (was 0.12)
  risk_aversion: 1.2  # AGGRESSIVE: Lower aversion (was 1.5)
  correlation_penalty: 0.2  # AGGRESSIVE: Lower penalty (was 0.3)
  expected_return_boost: 1.2  # AGGRESSIVE: Higher boost (was 1.1)
  
  # Correlation and exposure guardrails
  max_correlation: 0.7  # 70% maximum correlation between positions
  max_portfolio_risk: 0.05  # AGGRESSIVE: 5% maximum portfolio risk budget (was 0.03%)
  
  # Sector caps (percentage of max positions allowed per sector)
  sector_caps:
    "layer1": 0.6  # AGGRESSIVE: Max 60% of positions (was 40%)
    "defi": 0.4    # AGGRESSIVE: Max 40% of positions (was 30%)
    "meme": 0.3    # AGGRESSIVE: Max 30% of positions (was 20%)
    "stablecoin": 0.1  # Max 10% of positions can be stablecoins
  
  # Asset to sector mapping
  asset_sectors:
    "BTC/USDT": "layer1"
    "ETH/USDT": "layer1"

    "ADA/USDT": "layer1"
    "SOL/USDT": "layer1"
    "DOT/USDT": "layer1"
    "AVAX/USDT": "layer1"
    "MATIC/USDT": "layer1"
    "LINK/USDT": "defi"
    "UNI/USDT": "defi"
    "AAVE/USDT": "defi"
    "COMP/USDT": "defi"
    "SUSHI/USDT": "defi"
    "DOGE/USDT": "meme"
    "SHIB/USDT": "meme"
    "PEPE/USDT": "meme"
    "USDT/USD": "stablecoin"
    "USDC/USD": "stablecoin"
    "DAI/USD": "stablecoin"

  rebalancing:
    enabled: true
    interval: 3600  # 1 hour
    threshold: 0.05  # 5% deviation threshold

  diversification:
    enabled: true
    max_correlation: 0.7
    sector_allocation:
      crypto: 0.8
      stablecoins: 0.2

  performance_tracking:
    enabled: true
    metrics:
      - "sharpe_ratio"
      - "sortino_ratio"
      - "calmar_ratio"
      - "max_drawdown"
      - "win_rate"
      - "profit_factor"


# State Persistence Configuration
state:
  db_path: "trading_state.db"
  backup_enabled: true
  backup_interval: 3600  # 1 hour in seconds

# Logging Configuration
logging:
  level: "INFO"
  file: "logs/crypto_mvp.log"
  rotation: "1 week"
  retention: "1 month"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

  # Logging modules
  modules:
    trading: "INFO"
    risk: "INFO"
    execution: "INFO"
    data: "WARNING"
    strategies: "INFO"
    portfolio: "INFO"

  # Performance logging
  performance:
    enabled: true
    file: "logs/performance.log"
    rotation: "1 day"
    metrics:
      - "trades"
      - "profits"
      - "drawdowns"
      - "signals"
  
  # SL/TP logging configuration
  sl_tp_line: true  # Enable detailed SL/TP source logging

# Database Configuration
database:
  type: "sqlite"  # sqlite, postgresql, mysql
  url: "sqlite:///crypto_mvp.db"
  pool_size: 10
  max_overflow: 20
  echo: false

  # Tables
  tables:
    trades: true
    signals: true
    performance: true
    logs: true

# Redis Configuration (for caching)
redis:
  enabled: true
  host: "localhost"
  port: 6379
  db: 0
  password: null
  timeout: 5

  # Cache settings
  cache:
    market_data: 60  # seconds
    indicators: 300  # 5 minutes
    sentiment: 600  # 10 minutes
    on_chain: 1800  # 30 minutes

# Monitoring and Alerts
monitoring:
  enabled: true
  health_check_interval: 300  # 5 minutes

  # Alerts
  alerts:
    email:
      enabled: false
      smtp_server: "smtp.gmail.com"
      smtp_port: 587
      username: "your_email@gmail.com"
      password: "your_app_password"
      recipients:
        - "admin@example.com"

    telegram:
      enabled: false
      bot_token: "your_telegram_bot_token"
      chat_id: "your_chat_id"

    discord:
      enabled: false
      webhook_url: "your_discord_webhook_url"

  # Alert conditions
  conditions:
    max_drawdown_exceeded: true
    daily_loss_limit_exceeded: true
    connection_lost: true
    strategy_error: true
    execution_failed: true

# Profit Realization Configuration
realization:
  enabled: "${REALIZATION_ENABLED:-true}"  # Feature flag - enabled by default for production (overridable via REALIZATION_ENABLED env var)
  
  # Take profit ladder configuration
  take_profit_ladder:
    - r: 0.5    # At 0.5R profit
      pct: 0.25 # Sell 25% of position
    - r: 1.0    # At 1.0R profit  
      pct: 0.35 # Sell 35% of remaining position
    - r: 2.0    # At 2.0R profit
      pct: 0.30 # Sell 30% of remaining position
  
  # Trailing stop configuration
  trail:
    type: "chandelier"      # Trailing stop type
    n: 22                   # Lookback period for chandelier
    atr_mult_normal: 2.0    # ATR multiplier for normal volatility
    atr_mult_high_vol: 2.5  # ATR multiplier for high volatility
  
  # Time stop configuration
  time_stop_hours: 24  # Exit position after 24 hours if no TP/SL hit

# Session Risk Management Configuration
session_risk:
  daily_profit_trail_pct: 0.5  # 0.5% daily profit trail
  daily_dd_halt_pct: 0.01      # 1% daily drawdown halt

# Equity Reconciliation Configuration
equity:
  reconcile_tolerance: 0.0001  # 0.01% tolerance for equity reconciliation
  max_reconcile_iterations: 5  # Maximum iterations before hard stop

# Enhanced Execution Configuration
execution:
  # Existing execution config...
  order_type: "market"  # market, limit, stop
  slippage_tolerance: 0.001  # 0.1%
  max_retries: 3
  retry_delay: 5  # seconds
  timeout: 30  # seconds
  
  # New execution parameters
  maker_timeout_sec: 4      # Maker order timeout in seconds
  max_depth_pct: 0.2        # Maximum order book depth percentage
  
  # Strengthened sizing and slice configuration
  risk_per_trade_pct: 0.01       # Base risk (outside risk-on mode)
  per_symbol_cap_pct: 0.15       # Notional cap per symbol (15% of equity)
  session_cap_pct: 0.60          # Total deployment cap (60% of equity)
  min_slice_notional: 25         # Minimum slice size (bumped from $10)
  default_slice_notional: 50     # Typical slice size
  max_slices_per_order: 20       # Maximum slices per order
  
  # Edge after costs guard
  require_edge_after_costs: true  # Enable edge after costs guard
  min_edge_after_costs_bps: 10  # Minimum 10 bps edge after costs
  
  # Fee configuration (in basis points)
  maker_fee_bps: 10  # 0.1% maker fee
  taker_fee_bps: 20  # 0.2% taker fee (used for worst-case guard)
  
  # Post-only order routing
  post_only: true  # Use post-only limit orders at best bid/ask
  post_only_max_wait_seconds: 5  # Maximum wait time for maker fills
  allow_taker_fallback: false  # Do not convert to market orders if not filled

  # Order management
  order_management:
    enabled: true
    auto_cancel: true
    cancel_timeout: 300  # 5 minutes
    partial_fills: true

  # Slippage control
  slippage_control:
    enabled: true
    max_slippage: 0.002  # 0.2%
    dynamic_sizing: true

# Development and Testing
development:
  debug: false
  test_mode: true
  paper_trading: true
  simulation:
    enabled: true
    start_balance: 10000
    commission: 0.001  # 0.1%
    slippage: 0.0005  # 0.05%

  # Backtesting
  backtesting:
    enabled: true
    start_date: "2023-01-01"
    end_date: "2024-01-01"
    initial_balance: 10000
    commission: 0.001

# API Configuration
api:
  enabled: true
  host: "0.0.0.0"
  port: 8000
  debug: false

  # Authentication
  auth:
    enabled: false
    secret_key: "your_secret_key_here"
    token_expiry: 3600  # 1 hour

  # Rate limiting
  rate_limit:
    enabled: true
    requests_per_minute: 60
    burst_size: 10

# Environment Variables (will be replaced at runtime)
environment:
  # API Keys (set these in your .env file)
  BINANCE_API_KEY: "${BINANCE_API_KEY}"
  BINANCE_SECRET: "${BINANCE_SECRET}"
  COINBASE_API_KEY: "${COINBASE_API_KEY}"
  COINBASE_SECRET: "${COINBASE_SECRET}"
  TWITTER_API_KEY: "${TWITTER_API_KEY}"
  REDDIT_API_KEY: "${REDDIT_API_KEY}"
  NEWS_API_KEY: "${NEWS_API_KEY}"
  WHALE_ALERT_API_KEY: "${WHALE_ALERT_API_KEY}"
  GLASSNODE_API_KEY: "${GLASSNODE_API_KEY}"

  # Database
  DATABASE_URL: "${DATABASE_URL:-sqlite:///crypto_mvp.db}"

  # Redis
  REDIS_HOST: "${REDIS_HOST:-localhost}"
  REDIS_PORT: "${REDIS_PORT:-6379}"
  REDIS_PASSWORD: "${REDIS_PASSWORD:-}"

  # Logging
  LOG_LEVEL: "${LOG_LEVEL:-INFO}"
  LOG_FILE: "${LOG_FILE:-logs/crypto_mvp.log}"
